/* === Global Readability for DARK Background === */
/* ... (Keep all rules from #main.wrapper ... down to #main.wrapper pre ...) ... */
#main.wrapper {
  color: rgba(255, 255, 255, 0.85);
}
#main.wrapper h1,
#main.wrapper h2,
#main.wrapper h3,
#main.wrapper h4,
#main.wrapper h5,
#main.wrapper h6 {
  color: #ffffff;
}
#main.wrapper h3::after {
  background-color: #e44c65;
}
#main.wrapper p {
  color: rgba(255, 255, 255, 0.85);
}
#main.wrapper li {
  color: rgba(255, 255, 255, 0.85);
}
#main.wrapper a {
  color: #9cf;
}
#main.wrapper strong {
  color: #ffffff;
  font-weight: 600;
}
#main.wrapper .table-wrapper {
  background-color: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
#main.wrapper th,
#main.wrapper td {
  color: rgba(255, 255, 255, 0.9);
  border-color: rgba(255, 255, 255, 0.15);
}
#main.wrapper th {
  color: #ffffff;
  background-color: rgba(255, 255, 255, 0.1);
}
#main.wrapper code {
  background-color: rgba(255, 255, 255, 0.15);
  color: #adf;
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 0.2em 0.5em;
  border-radius: 4px;
  font-size: 0.9em;
  margin: 0 0.1em;
  font-family: "Courier New", Courier, monospace;
}
#main.wrapper pre code {
  background-color: transparent;
  color: inherit;
  border: none;
  padding: 0;
  margin: 0;
}
#main.wrapper pre {
  background-color: rgba(0, 0, 0, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-left: 4px solid #e44c65;
  color: #f0f0f0;
  padding: 1em;
  overflow-x: auto;
  border-radius: 4px;
  margin-bottom: 1.5em;
  font-family: "Courier New", Courier, monospace;
  font-size: 0.9em;
  line-height: 1.6;
  white-space: pre-wrap;
  word-wrap: break-word;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
}
#main.wrapper ol > li::before {
  background: #e44c65;
  color: white;
}
#main.wrapper ul > li::before {
  color: #e44c65;
}
#main.wrapper figure {
  background-color: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 1em;
  border-radius: 8px;
  margin: 2.5em 0;
  text-align: center;
}
#main.wrapper figcaption {
  color: white;
  margin-top: 1em;
  font-size: 0.9em;
}
#main.wrapper figure img.responsive {
  max-width: 100%;
  height: auto;
  display: block;
  margin-left: auto;
  margin-right: auto;
  border-radius: 4px;
}

/* === About Page Enhancements === */
/* ... (Keep general #main rules, heading styles, list styles, table styles, hover effects, button styles) ... */
#main.wrapper .container {
  padding-top: 3em;
  padding-bottom: 3em;
}
#main .container > section {
  padding: 2.5em 0;
  margin-bottom: 2.5em;
  border-bottom: 1px solid rgba(255, 255, 255, 0.15); /* opacity: 0; */ /* transform: translateY(30px); */
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
#main .container > section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}
#main .container > section.animate-in {
  opacity: 1;
  transform: translateY(0);
}
#main h3 {
  font-size: 1.75em;
  margin-bottom: 1em;
  position: relative;
  padding-bottom: 0.5em;
}
#main h3::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 50px;
  height: 3px;
  background-color: #e44c65;
  transition: width 0.3s ease;
}
#main h3:hover::after {
  width: 80px;
}
#main h4 {
  font-size: 1.3em;
  margin-top: 2em;
  margin-bottom: 0.8em;
}
#main p {
  line-height: 1.8;
  margin-bottom: 1.5em;
}
#main ol,
#main ul {
  margin-left: 1.5em;
  margin-bottom: 1.5em;
  padding-left: 1em;
}
#main li {
  padding-bottom: 0.8em;
  position: relative;
}
#main ol {
  list-style: none;
  counter-reset: section-counter;
}
#main ol > li::before {
  counter-increment: section-counter;
  content: counter(section-counter);
  background: #e44c65;
  color: white;
  font-weight: bold;
  border-radius: 50%;
  width: 1.8em;
  height: 1.8em;
  display: inline-block;
  text-align: center;
  line-height: 1.8em;
  margin-right: 0.8em;
  font-size: 0.9em;
  position: absolute;
  left: -2.8em;
  top: 0;
}
#main ul {
  list-style: none;
}
#main ul > li::before {
  content: "\f00c";
  font-family: "Font Awesome 5 Free";
  font-weight: 900;
  color: #e44c65;
  margin-right: 0.8em;
  position: absolute;
  left: -1.8em;
  top: 0.1em;
  font-size: 1em;
}
#goals ul > li::before {
  content: "\f140";
}
#tradeoffs ol > li::before {
  content: counter(section-counter);
}
#tradeoffs ul > li::before {
  content: "\f0eb";
}
.table-wrapper {
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin-bottom: 2em;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 0;
}
th {
  font-weight: bold;
}
#main section:hover h3::after {
  width: 100px;
}
.button.primary.icon.code-link,
.button.primary.icon.data-link {
  transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
}
.button.primary.icon.code-link:hover,
.button.primary.icon.data-link:hover {
  background-color: #d63a53;
  transform: translateY(-2px);
}

#header nav {
  height: auto;
}
/* === Styles for Diagram WITHIN CAROUSEL === */
/* === Complete Carousel Styling Block (Full Width, Grid Layout, Absolute UR5) === */

/* Main carousel container - MODIFIED FOR FULL WIDTH */
.carousel-container {
  position: relative;
  width: 100%; /* Ensure it takes full width */
  /* max-width: 1200px; */ /* REMOVED max-width */
  margin: 3em 0; /* REMOVED horizontal auto margin */
  background: #12121d;
  border-radius: 0; /* Optional: Remove radius if you want sharp edges */
  padding: 2.5rem; /* Keep padding for content spacing */
  min-height: 700px;
  overflow: hidden;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
  border: none; /* Optional: Remove border if it looks odd at full width */
  border-top: 1px solid rgba(45, 140, 255, 0.2); /* Optional: Add top/bottom borders */
  border-bottom: 1px solid rgba(45, 140, 255, 0.2);
  box-sizing: border-box; /* Include padding in width calculation */
  height: 1000px;
}

/* Individual carousel slides */
.carousel-slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  visibility: hidden;
  transition: transform 0.6s ease, opacity 0.6s ease;
  transform: translateX(100%);
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  box-sizing: border-box;
}

.carousel-slide.active {
  position: relative;
  visibility: visible;
  opacity: 1;
  transform: translateX(0%);
  z-index: 1;
}

.carousel-slide.slide-left {
  transform: translateX(-100%);
}

.carousel-slide.slide-right {
  transform: translateX(100%);
}

/* Content wrapper inside slides */
.carousel-content {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 1.5rem;
  box-sizing: border-box;
  max-width: 1200px; /* Add max-width HERE to constrain content, not container */
  margin: 0 auto; /* Center the content within the full-width slide */
}

/* Full-size images in carousel */
.carousel-full-image {
  display: block;
  width: auto;
  height: auto;
  max-width: 90%;
  max-height: 85%;
  object-fit: contain;
  border-radius: 16px;
  box-shadow: 0 0 20px rgba(45, 140, 255, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Specific control for second slide image */
.carousel-slide:nth-child(2) .carousel-full-image {
  max-width: 80%;
  max-height: 75%;
}

/* Navigation buttons */
.carousel-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background-color: rgba(45, 140, 255, 0.7);
  color: white;
  border: none;
  font-size: 2rem;
  width: 50px;
  height: 50px;
  line-height: 45px;
  text-align: center;
  cursor: pointer;
  border-radius: 50%;
  transition: all 0.3s ease;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.carousel-btn.next {
  right: 1.5rem;

  z-index: 9999 !important;
}

.carousel-btn.prev {
  left: 1.5rem;
}

.carousel-btn:hover {
  background-color: #2d8cff;
  transform: translateY(-50%) scale(1.1);
}

/* Diagram wrapper styling - Needs position: relative for absolute children */
.carousel-slide .diagram-wrapper {
  position: relative;
  overflow: visible; /* Allow arrows to potentially draw outside bounds slightly */
  background: linear-gradient(to bottom, #1a1a2e, #12121d);
  padding: 2rem;
  border-radius: 12px;
  min-height: 600px;
  width: 100%; /* Takes width of .carousel-content */
  height: 100%;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  box-sizing: border-box;
  border: 1px solid rgba(45, 140, 255, 0.15);
}

/* SVG canvas for arrows */
.carousel-slide .diagram-wrapper #arrow-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  overflow: visible; /* Allow arrows to draw outside SVG bounds if needed */
}

/* UR5 robot styling - Absolute Positioning */
.carousel-slide .diagram-wrapper #ur5 {
  position: absolute;
  top: 2rem;
  left: 2rem;
  z-index: 2;
  order: unset;
  margin-bottom: unset;
  padding: 0;
  background: none;
  border: none;
  text-align: center;
}

.carousel-slide .diagram-wrapper #ur5 img {
  width: 150px;
  height: auto;
  margin-bottom: 0.5rem;
  transition: filter 0.3s ease;
}

.carousel-slide .diagram-wrapper #ur5.active-glow img {
  filter: drop-shadow(0 0 10px #2d8cff) brightness(1.2);
}

/* Quadruped cluster styling - Grid Layout */
.carousel-slide .diagram-wrapper .quad-cluster {
  display: grid;
  grid-template-columns: 1fr 1fr; /* 2 columns */
  grid-template-rows: auto auto auto; /* 3 rows: Image, Status, Plots */
  gap: 1rem;
  justify-items: center;
  align-items: center;
  width: fit-content;
  max-width: 600px;
  /* Position relative to diagram-wrapper, adjust top/left/right as needed */
  position: absolute;
  top: 10rem; /* Adjust as needed */
  right: 5rem; /* Adjust as needed */
  /* margin: 10rem auto 2rem auto; */ /* REMOVED margin positioning */
  padding: 1.5rem;
  background: rgba(30, 30, 46, 0.5);
  border-radius: 15px;
  border: 1px solid rgba(45, 140, 255, 0.2);
  order: unset;
  flex-direction: unset;
  z-index: 2;
}

/* Quadruped Image Styling */
.carousel-slide .diagram-wrapper #quadrupedImg {
  grid-column: 1 / span 2; /* Row 1, Columns 1-2 */
  grid-row: 1;
  width: 200px;
  height: auto;
  z-index: 2;
  transition: transform 0.1s ease-out;
  transform: scaleX(-1);
  margin-bottom: 1rem;
}

/* Quadruped Status Styling */
.carousel-slide .diagram-wrapper #quadStatus {
  grid-column: 1 / span 2; /* Row 2, Columns 1-2 */
  grid-row: 2;
  margin-top: 0;
  color: white;
  font-weight: 500;
  font-size: 1em;
  background-color: rgba(0, 0, 0, 0.5);
  padding: 0.5em 0.8em;
  border-radius: 6px;
  border: 1px solid rgba(45, 140, 255, 0.3);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  text-align: center;
}

/* IMU Plot Styling */
.carousel-slide .diagram-wrapper #imu-plot {
  grid-column: 1; /* Row 3, Column 1 */
  grid-row: 3;
  /* Inherits .block styling */
}

/* Camera Pose Styling */
.carousel-slide .diagram-wrapper #camera-pose {
  grid-column: 2; /* Row 3, Column 2 */
  grid-row: 3;
  /* Inherits .block styling */
}

/* Block styling for nodes (used by IMU/Camera plots) */
.carousel-slide .diagram-wrapper .block {
  background: rgba(30, 30, 46, 0.8);
  color: #ffffff;
  padding: 1.2rem 1.5rem;
  border-radius: 10px;
  min-width: 200px;
  width: 100%; /* Make blocks fill grid cell */
  max-width: 250px;
  text-align: center;
  font-weight: 500;
  font-size: 0.95rem;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
  border: 1px solid #2d8cff;
  z-index: 2;
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
  box-sizing: border-box;
  margin: 0; /* Reset margin, use grid gap */
}

.carousel-slide .diagram-wrapper .block:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 6px 20px rgba(45, 140, 255, 0.5);
}

/* Canvas plots styling */
.carousel-slide .diagram-wrapper .animated-plot canvas,
.carousel-slide .diagram-wrapper .animated-camera-plot canvas {
  border-radius: 8px;
  background: #1e1e2a;
  border: 1px solid #2d8cff;
  box-shadow: inset 0 0 5px rgba(45, 140, 255, 0.3);
  display: block;
  margin: 0.8rem auto 0.6rem;
  width: 90%; /* Adjust width within block */
  max-width: 220px;
  height: 90px;
  box-sizing: border-box;
}

/* Labels styling */
.carousel-slide .diagram-wrapper .label {
  color: #eee;
  font-size: 0.9rem;
  font-weight: 500;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  margin-top: 0.3rem;
}

/* Arrow text styling */
.carousel-slide .diagram-wrapper #arrow-canvas text {
  fill: #ddd;
  font-size: 12px;
  font-weight: 400;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
}

/* Responsive adjustments */
@media screen and (max-width: 980px) {
  /* Adjust cluster position for medium screens */
  .carousel-slide .diagram-wrapper .quad-cluster {
    right: 2rem;
    top: 12rem;
  }
}

@media screen and (max-width: 768px) {
  .carousel-container {
    padding: 1.5rem 0; /* Adjust padding for smaller screens */
    min-height: auto; /* Allow height to adjust */
  }

  .carousel-content {
    padding: 1rem;
    max-width: 100%; /* Allow content to use full width */
  }

  .carousel-slide {
    padding: 1rem;
  }

  .carousel-full-image {
    max-width: 90%;
    max-height: 80%;
  }

  .carousel-slide:nth-child(2) .carousel-full-image {
    max-width: 85%;
    max-height: 75%;
  }

  .carousel-slide .diagram-wrapper {
    padding: 1.5rem 1rem;
    min-height: 550px; /* Adjust min-height */
  }

  .carousel-slide .diagram-wrapper #ur5 {
    top: 1rem;
    left: 1rem;
    position: static; /* Stack UR5 on small screens */
    margin-bottom: 1rem;
  }

  .carousel-slide .diagram-wrapper #ur5 img {
    width: 120px;
  }

  .carousel-slide .diagram-wrapper .quad-cluster {
    position: static; /* Stack cluster below UR5 */
    grid-template-columns: 1fr; /* Stack elements in one column */
    grid-template-rows: auto auto auto auto; /* Adjust rows: Image, Status, IMU, Camera */
    margin: 1rem auto; /* Adjust margin */
    gap: 0.8rem;
    width: 90%;
    max-width: 400px;
  }

  .carousel-slide .diagram-wrapper #quadrupedImg {
    grid-column: 1; /* Span 1 column */
    grid-row: 1;
    width: 150px;
  }

  .carousel-slide .diagram-wrapper #quadStatus {
    grid-column: 1; /* Span 1 column */
    grid-row: 2;
  }

  .carousel-slide .diagram-wrapper #imu-plot {
    grid-column: 1; /* Span 1 column */
    grid-row: 3;
  }

  .carousel-slide .diagram-wrapper #camera-pose {
    grid-column: 1; /* Span 1 column */
    grid-row: 4;
  }

  .carousel-btn {
    width: 40px;
    height: 40px;
    font-size: 1.5rem;
    line-height: 36px;
  }

  .carousel-btn.next {
    right: 1rem;
  }

  .carousel-btn.prev {
    left: 1rem;
  }
}

/* === END: User-Provided Carousel CSS === */

/* === Styles derived from the provided #course-info CSS === */
#course-info {
  padding: 3em 0 !important;
  background: #2e3141;
  color: #fff;
}
#course-info h2 {
  color: #fff;
}
#course-info p {
  color: rgba(255, 255, 255, 0.8);
}

/* === Banner Adjustments === */
#banner .content {
  background-color: rgba(46, 49, 65, 0.8);
  padding: 2em;
  border-radius: 8px;
}
#banner header h2 {
  font-size: 2.5em;
}

/* === Footer Adjustments === */
#footer {
  background-color: #2e3141;
  color: rgba(255, 255, 255, 0.7);
  padding: 1rem;
}
#footer .icons a {
  color: rgba(255, 255, 255, 0.7);
}
#footer .icons a:hover {
  color: #fff;
}
#footer .copyright {
  color: rgba(255, 255, 255, 0.5);
}
#footer .copyright a {
  color: rgba(255, 255, 255, 0.6);
  border-bottom-color: rgba(255, 255, 255, 0.3);
}
#footer .copyright a:hover {
  color: #fff;
  border-bottom-color: #fff;
}

/* === Keyframes === */
@keyframes fade {
  from {
    opacity: 0.5;
  }
  to {
    opacity: 1;
  }
}

/* Style the tab buttons */
.tab {
  overflow: hidden;
  border-bottom: 1px solid #ccc;
  margin-bottom: 20px;
}

.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 1em; /* Adjust as needed */
  color: inherit; /* Inherit text color */
  border-bottom: 3px solid transparent; /* For active indicator */
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd; /* Or use template's hover color */
  color: #333; /* Adjust hover text color */
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #eee; /* Or use template's active color */
  color: #e85a4f; /* Match primary button color */
  border-bottom: 3px solid #e85a4f; /* Active indicator */
}

/* Style the tab content */
.tabcontent {
  display: none; /* Hide tabs by default */
  padding: 6px 12px;
  border-top: none;
  animation: fadeEffect 1s; /* Fading effect */
}
/* Style the tab buttons */
.tab {
  overflow: hidden;
  border-bottom: 1px solid #ccc;
  margin-bottom: 20px;
}

.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 1em; /* Adjust as needed */
  color: inherit; /* Inherit text color */
  border-bottom: 3px solid transparent; /* For active indicator */
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd; /* Or use template's hover color */
  color: #333; /* Adjust hover text color */
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #eee; /* Or use template's active color */
  color: #e85a4f; /* Match primary button color */
  border-bottom: 3px solid #e85a4f; /* Active indicator */
}

/* Style the tab content */
.tabcontent {
  display: none; /* Hide tabs by default */
  padding: 6px 12px;
  border-top: none;
  animation: fadeEffect 1s; /* Fading effect */
}

/* Simple fade effect */
@keyframes fadeEffect {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* Simple fade effect */
@keyframes fadeEffect {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
